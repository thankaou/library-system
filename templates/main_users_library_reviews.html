{% extends "global.html" %}

{% block content %}
<div class="container">
    <h1>Write a Review</h1>
    <form method="POST" action="/main/users/library/reviews">
        <div class="form-group">
            <label for="book_id">Book ID:</label>
            <input type="text" class="form-control" id="book_id" name="book_id" value="{{ book_id }}" readonly>
        </div>
        <div class="form-group">
            <label for="loan_id">Loan ID:</label>
            <input type="text" class="form-control" id="loan_id" name="loan_id" value="{{ loan_id }}" readonly>
        </div>
        <div class="form-group">
            <label for="rating">Rating:</label>
            <select class="form-control" id="rating" name="rating">
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
            </select>
        </div>
        <div class="form-group">
            <label for="review">Review:</label>
            <textarea class="form-control" id="review" name="review"></textarea>
        </div>
        <button type="submit" class="btn btn-primary">Submit Review</button>
    </form>
</div>
<script>
    // Get the URL query parameters
    const urlParams = new URLSearchParams(window.location.search);

    // Get the book_id and loan_id values from the query parameters
    const bookId = urlParams.get('book_id');
    const loanId = urlParams.get('loan_id');

    // Fill the book_id and loan_id forms with the retrieved values
    document.getElementById('book_id').value = bookId;
    document.getElementById('loan_id').value = loanId;
</script>
{% endblock %}
